// -------------------------------------------------------
// Tiled image gallery component
// Responsive CSS grid of thumbnails with optional captions.
// Used via _includes/gallery.html
// -------------------------------------------------------

.gallery {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 8px;
  margin: 1.5em 0;
  align-items: start;

  // Fixed-column variants (cols: 2 / 3 / 4 in the include)
  &--cols-2 { grid-template-columns: repeat(2, 1fr); }
  &--cols-3 { grid-template-columns: repeat(3, 1fr); }
  &--cols-4 { grid-template-columns: repeat(4, 1fr); }

  @include mobile {
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 6px;
  }
}

.gallery-item {
  display: flex;
  flex-direction: column;
  text-decoration: none;
  border-radius: 4px;
  overflow: hidden;
  background: transparent;

  &__thumb {
    display: block;
    aspect-ratio: 1;
    overflow: hidden;
    flex-shrink: 0;

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transition: transform 0.2s ease, opacity 0.2s ease;
    }
  }

  &:hover &__thumb img {
    transform: scale(1.06);
    opacity: 0.88;
  }

  &__caption {
    display: block;
    padding: 4px 6px 5px;
    font-size: 0.72em;
    line-height: 1.3;
    color: $gray;
    background: transparent;
    // Clamp to two lines with ellipsis
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

// On small screens collapse 3- and 4-col fixed grids to 2 cols
.gallery--cols-3,
.gallery--cols-4 {
  @include mobile {
    grid-template-columns: repeat(2, 1fr);
  }
}
